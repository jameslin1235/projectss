{% load widget_tweaks %}
{% load custom_tags %}
<div class="list_page" id="profile_posts_page" data-pageurl="{{current_url}}?page={{current_page.number}}" data-firstpage="{{current_url}}" data-option-selected={{option}} >
  <div class="page-header list_header">
    <h4 class="list_header_text"><span>{{posts_count}}</span> {{ title }}</h4>


    <div class="list_header_options">
      <select id="profile_posts_select">
        <option class="filter_button" value="1" selected="selected">By date created</option>
        <option class="filter_button" value="2">By date edited</option>
        <option class="filter_button" value="3">By date published</option>
        <option class="filter_button" value="4">By likes</option>
        <option class="filter_button" value="5">By dislikes</option>
        <option class="filter_button" value="6">By comments</option>

      </select>
    </div>
  </div>
  <div>
    <a class="btn btn-primary" href="{% url 'posts:post_create' %}"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Write</a>
  </div>

  {% if no_posts == True %}
  <div>
    <p>There are no posts.</p>
  </div>

  {% else %}
  <div>

    {% for post in current_page %}
    <div class="list_item">
      <div class="ContentItem" data-url="{{post.get_absolute_url}}">
        <div class="ContentItem_title">
          <h2><a href="{{ post.get_absolute_url }}">{{ post.title }}</a></h2>
        </div>
        <div class="ContentItem_meta">
          <div class="media">
            <div class="media-left">
              <a href="{% url 'profiles:profile_activity' id=user.profile.id slug=user.profile.slug %}">
                <img class="media-object ContentItem_avatar" src="{{user.profile.avatar.url}}">
              </a>
            </div>
            <div class="media-body">
              <h4 class="media-heading"><a href="{% url 'profiles:profile_activity' id=user.profile.id slug=user.profile.slug %}">{{user.username }}</a></h4>

            </div>

          </div>
        </div>
        <div class="ContentItem_likers">
          <button type="button" class="btn btn-plain ContentItem_likers_count">{{post.likes}} people liked this post.</button>
        </div>
        <div class="ContentItem_content">
          <div><p>{{ post.content }}</p></div>
          <div class="ContentItem_time"><a href="{{ post.get_absolute_url }}">Published {{ post.date_published }}</a></div>
        </div>
        <div class="ContentItem_actions">

          <button type="button" class="btn vote_button like_button {% if user_posts_like_status|index:forloop.counter0 == "Liked" %}active{% endif %}"  {% if disabled_buttons_status|index:forloop.counter0 == "Disabled" %}disabled="disabled"{% endif %} }><span class="glyphicon glyphicon-thumbs-up Icon" aria-hidden="true"></span> <span class="ContentItem_actions_likers_count">{{ post.likes }}</span></button>
          <button type="button" class="btn vote_button dislike_button {% if user_posts_dislike_status|index:forloop.counter0 == "Disliked" %}active{% endif %}" {% if disabled_buttons_status|index:forloop.counter0 == "Disabled" %}disabled="disabled"{% endif %} ><span class="glyphicon glyphicon-thumbs-down Icon" aria-hidden="true"></span> <span class="ContentItem_actions_dislikers_count">{{ post.dislikes }}</span></button>
          <button type="button" class="btn btn-plain ContentItem_action comment_button"><span class="glyphicon glyphicon-comment Icon" aria-hidden="true"></span> {{ comments_count|index:forloop.counter0 }}</button>
          <button type="button" class="btn btn-plain ContentItem_action" ><span class="glyphicon glyphicon-share Icon" aria-hidden="true"></span> Share</button>
          <button type="button" class="btn btn-plain ContentItem_action  bookmark_button"><span class="glyphicon glyphicon-bookmark Icon" aria-hidden="true"></span> Bookmark</button>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>

  <div>
    <ul class="pagination">
      {% if current_page.has_previous %}
      <li><a class="page_button" href="?page={{ current_page.previous_page_number }}">&laquo;</a></li>
      {% else %}
      <li class="disabled"><span>&laquo;</span></li>
      {% endif %}
      {% for i in current_page.paginator.page_range %}
      {% if current_page.number == i %}
      <li class="active"><span>{{ i }} <span class="sr-only">(current)</span></span></li>
      {% else %}
      <li><a class="page_button" href="?page={{ i }}">{{ i }}</a></li>
      {% endif %}
      {% endfor %}
      {% if current_page.has_next %}
      <li><a class="page_button" href="?page={{ current_page.next_page_number }}">&raquo;</a></li>
      {% else %}
      <li class="disabled"><span>&raquo;</span></li>
      {% endif %}
    </ul>
  </div>
  {% endif %}
</div>
